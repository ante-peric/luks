<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="LibreOffice 4.1.6.2 (Linux)">
	<META NAME="CREATED" CONTENT="20200921;143416960926316">
	<META NAME="CHANGED" CONTENT="20200925;162708039223795">
	<STYLE TYPE="text/css">
	<!--
		@page { size: 8.5in 11in; margin: 0.79in }
		P { margin-bottom: 0.1in; line-height: 115% }
		TD P { margin-bottom: 0in }
		A:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
	<h2><center>CaksSonicDeveloper© - Linux</center></h2>
	<hr style="color:#ffb380">
	<center>LUKS</center>
    <center>Linux Unified Key Setup - on - disk - format</center>
    <br>

	<hr style="color:#ffb380">
<center><p><a href="index.html">Početna</a></center> 
<hr style="color:#ffb380"
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0in; line-height: 100%"><B>5.1. Target
Server</B></P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Na <B>Target serveru</B> dodajemo novi disk (veličina proizvoljna 
(2GiB)- /dev/vdb).</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Prikaz diska:</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>vdb                      252:16   0    2G  0 disk 
			</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Kreiramo sljedeće:</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
particiju /dev/vdb1 – type Linux</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Prikaz diska</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>vdb                           252:16  0    2G   0 disk 
			</P>
			<P>└─vdb1                   252:17   0    2G  0 part</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Instaliramo target paketcli:</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>[root@node18 ~]# yum -y install targetcli</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Kreiramo backstores sa //dev/vdb1</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>[root@node18 ~]# targetcli</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/&gt; cd /backstores/block</P>
			<P>/backstores/block&gt; create shared_block /dev/vdb1</P>
			<P>Created block storage object shared_block using /dev/vdb1.</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/backstores/block&gt; cd /iscsi</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Kreiramo Target Portal u iscsi – imena
iqn.2020-09.com.caksonic:target0</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/iscsi&gt; create iqn.2020-09.com.caksonic:target0</P>
			<P>Created target iqn.2020-09.com.caksonic:target0.</P>
			<P>Created TPG 1.</P>
			<P>Global pref auto_add_default_portal=true</P>
			<P>Created default portal listening on all IPs (0.0.0.0), port
			3260.</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Kreiramo luns</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/iscsi&gt; cd iqn.2020-09.com.caksonic:target0</P>
			<P>/iscsi/iqn.20...sonic:target0&gt; cd tpg1</P>
			<P>/iscsi/iqn.20...:target0/tpg1&gt; cd luns</P>
			<P>/iscsi/iqn.20...et0/tpg1/luns&gt; create
			/backstores/block/shared_block</P>
			<P>Created LUN 0.</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Kreiramo acls – imena iqn.2020-09.com.caksonic:client0</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/iscsi/iqn.20...et0/tpg1/luns&gt; cd ..</P>
			<P>/iscsi/iqn.20...:target0/tpg1&gt; cd acls</P>
			<P>/iscsi/iqn.20...et0/tpg1/acls&gt; create
			iqn.2020-09.com.caksonic:client0</P>
			<P>Created Node ACL for iqn.2020-09.com.caksonic:client0</P>
			<P>Created mapped LUN 0.</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Postavljamo authentication:</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
user = izaberi korisnika</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
passwd = izaberi password</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/iscsi/iqn.20...et0/tpg1/acls&gt; cd
			iqn.2020-09.com.caksonic:client0</P>
			<P>/iscsi/iqn.20...sonic:client0&gt; set auth userid=<B>izaberi
			userid</B></P>
			<P>Parameter userid is now '<B>izaberi userid</B>'.</P>
			<P>/iscsi/iqn.20...sonic:client0&gt; set auth password=<B>izaberi
			password</B></P>
			<P>Parameter password is now '<B>izaberi password</B>'.</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Save configuration</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>/&gt; saveconfig</P>
			<P>Configuration saved to /etc/target/saveconfig.json</P>
			<P><BR>
			</P>
			<P>/&gt; exit</P>
			<P>Global pref auto_save_on_exit=true</P>
			<P>Last 10 configs saved in /etc/target/backup/.</P>
			<P>Configuration saved to /etc/target/saveconfig.json</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Start / Enable target</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>[root@node18 ~]# systemctl enable target</P>
			<P>Created symlink from
			/etc/systemd/system/multi-user.target.wants/target.service to
			/usr/lib/systemd/system/target.service.</P>
			<P>[root@node18 ~]# systemctl start target</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Firewall – port 3260 protokol tcp</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<TABLE WIDTH=100% CELLPADDING=4 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100% VALIGN=TOP STYLE="border: 1px solid #000000; padding: 0.04in">
			<P>[root@node18 ~]# firewall-cmd --permanent –add-port=3260/tcp</P>
			<P>[root@node18 ~]# firewall-cmd --reload</P>
		</TD>
	</TR>
</TABLE>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
<BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal; line-height: 100%">
Sa ovim smo završili Target Server postavke.</P>
</BODY>
<hr style="color:#ffb380">
<center><p><a href="5.html">Prethodna</a> | <a href="5_2.html">Sljedeća</a></center> 
<hr style="color:#ffb380">
</HTML>
